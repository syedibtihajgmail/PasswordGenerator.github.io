<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Password Generator</title>
    <!-- Tailwind CSS CDN for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a clean, professional look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styling for the range input thumb */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #2563eb;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s ease;
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #2563eb;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s ease;
        }
        input[type="range"]:hover::-webkit-slider-thumb {
            background: #1e40af;
        }
        input[type="range"]:hover::-moz-range-thumb {
            background: #1e40af;
        }
    </style>
</head>
<body class="bg-gray-900 flex items-center justify-center min-h-screen p-4">

    <div class="bg-gray-800 p-8 rounded-2xl shadow-xl max-w-lg w-full text-center m-4">
        <!-- New disclaimer link at the top -->
        <p class="text-sm text-gray-400 mb-4 text-center">
            This is a free, client-side service. No data is saved.
        </p>

        <h1 class="text-3xl font-bold text-gray-100 mb-6">Custom Password Generator</h1>
        
        <!-- Password Display Area with copy functionality -->
        <div class="relative bg-gray-700 text-gray-100 font-mono text-xl py-4 px-6 rounded-lg mb-6 break-all">
            <span id="password-display">Click generate or adjust options</span>
            <button id="copy-button" class="absolute top-2 right-2 p-1 text-gray-400 hover:text-white transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
            </button>
            <div id="copy-message" class="absolute -bottom-8 left-1/2 -translate-x-1/2 text-sm text-green-400 opacity-0 transition-opacity duration-300">Copied!</div>
        </div>

        <!-- Options for password generation -->
        <div class="space-y-6 text-left">
            <!-- Password Length Slider -->
            <div>
                <label for="password-length" class="text-gray-300 font-semibold text-lg flex justify-between">
                    <span>Password Length</span>
                    <span id="length-value" class="font-normal text-gray-400">12</span>
                </label>
                <input type="range" id="password-length" min="8" max="24" value="12" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer mt-2">
            </div>

            <!-- Character Type Checkboxes -->
            <div class="space-y-2">
                <div class="flex items-center">
                    <input type="checkbox" id="include-uppercase" class="form-checkbox h-5 w-5 text-blue-600 rounded-md" checked>
                    <label for="include-uppercase" class="ml-2 text-gray-300">Include Uppercase Letters</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="include-lowercase" class="form-checkbox h-5 w-5 text-blue-600 rounded-md" checked>
                    <label for="include-lowercase" class="ml-2 text-gray-300">Include Lowercase Letters</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="include-numbers" class="form-checkbox h-5 w-5 text-blue-600 rounded-md" checked>
                    <label for="include-numbers" class="ml-2 text-gray-300">Include Numbers</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="include-symbols" class="form-checkbox h-5 w-5 text-blue-600 rounded-md" checked>
                    <label for="include-symbols" class="ml-2 text-gray-300">Include Symbols</label>
                </div>
            </div>

            <!-- Generate Button -->
            <button id="generate-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 shadow-md mt-6">
                Generate Password
            </button>
        </div>
    </div>

    <script>
        // Get references to all necessary DOM elements
        const passwordDisplay = document.getElementById('password-display');
        const copyButton = document.getElementById('copy-button');
        const copyMessage = document.getElementById('copy-message');
        const lengthSlider = document.getElementById('password-length');
        const lengthValue = document.getElementById('length-value');
        const uppercaseCheckbox = document.getElementById('include-uppercase');
        const lowercaseCheckbox = document.getElementById('include-lowercase');
        const numbersCheckbox = document.getElementById('include-numbers');
        const symbolsCheckbox = document.getElementById('include-symbols');
        const generateButton = document.getElementById('generate-button');
        const checkboxes = [uppercaseCheckbox, lowercaseCheckbox, numbersCheckbox, symbolsCheckbox];

        // Character sets for password generation
        const charset = {
            lowercase: "abcdefghijklmnopqrstuvwxyz",
            uppercase: "ABCDEFGHIJKLMNOPQRSTUVWXYZ",
            numbers: "0123456789",
            symbols: "!@#$%^&*()_+-="
        };

        /**
         * Generates a random password based on the current options.
         */
        function generatePassword() {
            let password = "";
            let availableChars = "";
            const length = lengthSlider.value;

            // Build the character pool based on which checkboxes are checked
            if (lowercaseCheckbox.checked) availableChars += charset.lowercase;
            if (uppercaseCheckbox.checked) availableChars += charset.uppercase;
            if (numbersCheckbox.checked) availableChars += charset.numbers;
            if (symbolsCheckbox.checked) availableChars += charset.symbols;
            
            // If no character types are selected, this block won't be reached
            // due to the new checkbox validation logic.
            if (availableChars.length === 0) {
                passwordDisplay.textContent = "Please select at least one character type.";
                return;
            }

            // Generate the password by randomly picking characters from the available pool
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * availableChars.length);
                password += availableChars[randomIndex];
            }
            
            passwordDisplay.textContent = password;
        }

        // Add event listener to the slider to update the length value
        lengthSlider.addEventListener('input', () => {
            lengthValue.textContent = lengthSlider.value;
        });

        // Add event listeners to the generate button and checkboxes to update the password
        generateButton.addEventListener('click', generatePassword);
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', () => {
                // Check if this is the last checked checkbox
                const checkedCount = checkboxes.filter(cb => cb.checked).length;
                if (checkedCount === 0) {
                    // Prevent the last checkbox from being unchecked
                    checkbox.checked = true;
                    // Optionally, show a message
                    // alert("You must have at least one character type selected.");
                    return;
                }
                generatePassword();
            });
        });
        
        // Add event listener for the copy button using the modern Clipboard API
        copyButton.addEventListener('click', async () => {
            const passwordText = passwordDisplay.textContent;
            
            // Only copy if there's a valid password
            if (passwordText && passwordText.length >= 8 && passwordText !== "Please select at least one character type.") {
                try {
                    // Use the modern, promise-based Clipboard API
                    await navigator.clipboard.writeText(passwordText);
                    copyMessage.classList.add('opacity-100');
                    setTimeout(() => {
                        copyMessage.classList.remove('opacity-100');
                    }, 1500);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
            }
        });

        // Generate an initial password when the page loads
        document.addEventListener('DOMContentLoaded', generatePassword);
    </script>
</body>
</html>
